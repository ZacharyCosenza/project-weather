{% extends "base.html" %}

{% block content %}
<div class="dashboard-grid">
    <div id="loading-spinner" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading forecast...</p>
    </div>

    <div id="error-message" class="error-message" style="display:none;"></div>

    <div class="cards-grid" id="top-cards-container" style="display:none;">
        <div class="card current-weather-card" id="current-weather-display">
            <div class="weather-location">
                <h3 id="current-location-name">-</h3>
            </div>
            <div class="weather-current">
                <div class="weather-emoji" id="weather-emoji">üå°Ô∏è</div>
                <div class="current-temp">
                    <span class="temp-large" id="current-temp-value">-</span>
                    <span class="temp-unit">¬∞F</span>
                </div>
                <div class="current-forecast">
                    <p class="forecast-period" id="forecast-period-name">-</p>
                    <p id="forecast-description">-</p>
                    <p class="forecast-time" id="weather-timestamp">-</p>
                </div>
            </div>
            <div class="weather-bot-summary" id="weather-bot-content">
                <p class="weather-bot-header">Weather-Bot <span class="weather-bot-model" id="weather-bot-model"></span></p>
                <p class="weather-bot-message" id="weather-bot-message">Loading forecast summary...</p>
            </div>
        </div>

        <div class="card shap-card" id="shap-display">
            <h2>Feature Contributions</h2>
            <p class="shap-subtitle">What's driving the prediction?</p>
            <div class="shap-bar-container" id="shap-bar-container">
                <div class="shap-stacked-bar" id="shap-stacked-bar"></div>
            </div>
            <div class="shap-legend" id="shap-legend"></div>
        </div>
    </div>

    <div class="charts-row" id="charts-row-container" style="display:none;">
        <div class="card forecast-card">
            <h2>24-Hour Prediction <span class="forecast-subtitle">from <span id="forecast-start-time">-</span> at <span id="location-name">-</span></span></h2>
            <div class="chart-container">
                <canvas id="forecast-chart"></canvas>
            </div>
        </div>
        <div class="card forecast-card">
            <h2>Historical Temperatures <span class="forecast-subtitle">same dates from past years</span></h2>
            <div class="chart-container">
                <canvas id="historical-chart"></canvas>
            </div>
        </div>
    </div>

    <div class="technical-details" id="technical-details" style="display:none;">
        <h3>Technical Details</h3>
        <div class="tech-grid">
            <div class="tech-item">
                <span class="tech-label">Prediction Model</span>
                <span class="tech-value" id="tech-model">XGBoost</span>
            </div>
            <div class="tech-item">
                <span class="tech-label">Features</span>
                <span class="tech-value" id="tech-features">-</span>
            </div>
            <div class="tech-item">
                <span class="tech-label">Lag Temperatures</span>
                <span class="tech-value" id="tech-lags">-</span>
            </div>
            <div class="tech-item">
                <span class="tech-label">Data Source</span>
                <span class="tech-value">NWS weather.gov API</span>
            </div>
            <div class="tech-item">
                <span class="tech-label">LLM Model</span>
                <span class="tech-value" id="tech-llm">-</span>
            </div>
            <div class="tech-item">
                <span class="tech-label">Last Updated</span>
                <span class="tech-value" id="tech-updated">-</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
